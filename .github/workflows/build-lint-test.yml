name: Build Lint Test
run-name: ${{ github.actor }} is running build, lint and testing the flutter app ðŸ§ª

on:
    workflow_call:
        inputs:
            flutter-version:
                required: true
                type: string

jobs:
    build-lint-test:
        runs-on: ubuntu-latest
        steps:
          - name: Check out repository code 
            uses: actions/checkout@v4
    
          # Installs flutter and related dependency on this machine
          - name: Setup Flutters 
            uses: subosito/flutter-action@v2
            with:
                channel: ${{ inputs.flutter-version }}
          
          # Fetches proj dependencies from pub
          - name: Install dependencies
            run: flutter pub get
            # ^ If you want to use a specific version of flutter
          
          # Verifies if the dart code is formatted well
          - name: Verify formatting
            run: dart format --output=none --set-exit-if-changed .
            # --set-exit-if-changed stops execution if the any code is not well formatted
            # --output=none prints files which needs to be formatted
          
          # Checks for Symantic errors. Can be configured using analysis_options.yaml
          - name: Analyze project source
            run: flutter analyze
    
          # Runs unit test
          - name: Run tests
            run: flutter test